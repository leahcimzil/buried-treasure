<!DOCTYPE html>
<!DOCTYPE html>
<html>
<head>
	<title> Treasure Game </title>
</head>

<body>

<h1 id = "heading">Find The Buried Treasure!</h1>
	<p>Click on any part of the map to find a buried treasure</p>

<img id="map" width=500 height=400 src="http://nostarch.com/images/treasuremap.png">


<p id = "distance"></p>
<p id = "clicksLeft"></p>

<script src = "https://code.jquery.com/jquery-3.4.1.js"></script>

<script>
//Game code 

//Setting Necessary Functions

//get random number

function getRandomNumber(size){
	return Math.floor(Math.random()*size);
}


//Get distance between event and target

function getDistance(event,target){
	var diffx = event.offsetX - target.x;
	var diffy = event.offsetY - target.y;
	return Math.sqrt((diffx*diffx) + (diffy*diffy));

};

//Hints on how close player is from target

function getDistanceHint(distance){
	if(distance < 10){
		return "You are just a few steps away!";

	} else if (distance < 20){
		return "You are really close";

	} else if (distance <40){
		return "You are quite close!";

	} else if (distance <80){
		return "Hmmm, not too far, not too close either!";

	} else if (distance<160){
		return "You are far!";

	} else if (distance<320){
		return "You are really far!";

	} else {
		return "You couldn't be farther from the treasure than you are now!";
	}
};

//Setting Up Necessary Variables

var width = 500;
var height = 400;
var clicks = 50;

//Creating a random Target location


var target = {
	x:getRandomNumber(width),
	y:getRandomNumber(height)
			};

//Add Click Handler
$('#map').click(function(event){
	clicks--;
	if (clicks<1){
		alert(`Oops You only have 50 clicks Refresh to play again`);
		return;
	}

	//Get Distance Between Click and Event
	var distance = getDistance(event,target);

	//Convert Distance to Hint
	var distanceHint = getDistanceHint(distance);

	//Update the #distance element in html with hint
	$('#distance').text(distanceHint);

	$('#clicksLeft').text(`You have ${clicks} click(s) left`);
	
	//Update if player click was close enough to win
	if (distance<5){
		alert(`Congratulations, You have found the treasure with ${clicks} click(s) left!`);
	}
	return
	


});

</script>

</body>
</html>
